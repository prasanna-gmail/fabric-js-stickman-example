{"title":"Fraction Bar","free":true,"resources":[{"name":"FractionBar","type":"slides","pages":[{"paths":[{"obj":[{"type":"text2","rect":[20,5.006,416.28174572300253,114.88000000000002],"fontSize":42,"text":["If <<color:#00F>><<bold:true>>1 whole<<color:#000>><<bold:false>> is <<color:#F00>><<bold:true>>12cm<<color:#000>><<bold:false>>,"],"align":[-1,0],"color":"#000","draw":"function() {var objs = draw.ids.obj;var paths = draw.ids.path;var values = objs.question.values;var left = values.barMargin;var width = 1200 - 2 * values.barMargin;values.valueText = objs.question.fractionToDecimalText([values.wholeValue * values.position[0], values.position[1]]);var c = objs.value.rect[0] + objs.value.rect[2] / 2;if (objs.question.isFractionKnown(values.position) === true) {objs.value.text = clone(values.valueText);objs.value.ctx = draw.hiddenCanvas.ctx;objs.value.measureOnly = true;var textMeasure = text(objs.value).tightRect;delete objs.value.ctx;delete objs.value.measureOnly;objs.value.rect[2] = Math.max(80, textMeasure[2] + 20);} else {objs.value.rect[2] = 80;objs.value.text = ['?'];}objs.value.rect[0] = c - objs.value.rect[2] / 2;paths.marker.tightBorder[2] = objs.value.rect[2];if (values.position[0] % values.position[1] === 0) {objs.frac.text = [String(Math.round(values.position[0] / values.position[1]))];} else {var whole = '';var frac = clone(values.position);if (objs.improperMode.value === 2 && frac[0] > frac[1]) {whole = String(Math.floor(frac[0] / frac[1]));frac[0] = frac[0] % frac[1];}objs.frac.text = [whole, ['frac', [String(frac[0])],[String(frac[1])]], ''];}var x1 = left + width * (values.denominator / values.maxNumerator);var xf = left + width * (values.position[0] / values.maxNumerator);positionPath(paths.dragger, xf - paths.dragger.tightBorder[2] / 2, 290);positionPath(paths.marker, xf - paths.marker.tightBorder[2] / 2, 570);objs.colorBar1.points[0][0] = left;objs.colorBar1.points[3][0] = left;if (values.position[0] > values.position[1]) {objs.colorBar1.points[1][0] = x1;objs.colorBar1.points[2][0] = x1;objs.colorBar2.points[0][0] = x1;objs.colorBar2.points[1][0] = xf;objs.colorBar2.points[2][0] = xf;objs.colorBar2.points[3][0] = x1;paths.colorBar2.vis = true;} else {objs.colorBar1.points[1][0] = xf;objs.colorBar1.points[2][0] = xf;paths.colorBar2.vis = false;}}","id":"question","reset":"function(deleteKnownFractions) {var objs = draw.ids.obj;var paths = draw.ids.path;var values = objs.question.values;values.position = clone(values.startFraction);if (deleteKnownFractions !== false) {for (var p = 0; p < draw.path.length; p++) {var path = draw.path[p];if (path.temp === true) {draw.path.splice(p, 1);p--;}}values.knownFractions = [clone(values.position)];}paths.startValue.fraction = clone(values.startFraction);if (values.startFraction[1] % values.startFraction[0] === 0) {objs.startValueFraction.text = [String(Math.round(values.startFraction[1] / values.startFraction[0]))];} else {objs.startValueFraction.text = [[\"frac\", [String(values.startFraction[0])],[String(values.startFraction[1])]]];}objs.startValue.text = clone(values.startValueText);objs.startValue.ctx = draw.hiddenCanvas.ctx;objs.startValue.measureOnly = true;var textMeasure = text(objs.startValue).tightRect;delete objs.startValue.ctx;delete objs.startValue.measureOnly;objs.startValue.rect[2] = Math.max(80, textMeasure[2] + 20);objs.startValue.rect[0] = objs.startValueMarker.points[2][0] - objs.startValue.rect[2] / 2;updateBorder(paths.startValue);objs.question.updateScale();objs.question.draw();}","updateScale":"function() {var objs = draw.ids.obj;var paths = draw.ids.path;var values = objs.question.values;var left = values.barMargin;var width = 1200 - 2 * values.barMargin;paths.fractionScale.obj = [];for (var i = 0; i <= values.maxNumerator; i += values.denominator) {var x = left + width * (i / values.maxNumerator);if (i % values.denominator === 0) {var txt = [String(Math.round(i / values.denominator))];} else {var frac = [i, values.denominator];var txt = ['', ['frac', [String(frac[0])],[String(frac[1])]], ''];}paths.fractionScale.obj.push({type: 'text2',rect: [x - 25, 390, 50, 100],fontSize: 36,text: txt,align: [0, 1],fracScale: 1});}paths.verticalBars.obj = [];for (var i = 0; i <= values.maxNumerator; i++) {var x = left + width * (i / values.maxNumerator);paths.verticalBars.obj.push({type: 'line',color: i > values.denominator ? '#999' : '#000',thickness: 5,startPos: [x, 500],finPos: [x, 570]});}var x1 = left + width * (values.denominator / values.maxNumerator);for (var p = 0; p < draw.path.length; p++) {var path = draw.path[p];if (path.fraction instanceof Array) {var x = left + (x1 - left) * (path.fraction[0] / path.fraction[1]);positionPath(path, x - path.tightBorder[2] / 2, path.tightBorder[1]);}}objs.bar1.points[0][0] = left;objs.bar1.points[1][0] = x1;objs.bar1.points[2][0] = x1;objs.bar1.points[3][0] = left;if (values.maxNumerator > values.denominator) {objs.bar2.points[0][0] = x1;objs.bar2.points[1][0] = left + width;objs.bar2.points[2][0] = left + width;objs.bar2.points[3][0] = x1;paths.bar2.vis = true;} else {paths.bar2.vis = false;}}","values":{"denominator":4,"maxNumerator":4,"wholeValue":0.12,"value":12,"barMargin":70,"knownFractions":[[4,4]],"valueText":["12","cm"],"position":[4,4],"startNumerator":4,"startValueText":["12","cm"],"startFraction":[4,4],"unit":"m","scaleMax":1},"newQuestion":"function() {var objs = draw.ids.obj;var q = objs.question;var startMode = objs.startFractionMode.value;if (startMode === 1) {q.values.startNumerator = q.values.denominator;} else if (startMode === 2) {q.values.startNumerator = 1;} else if (startMode === 3) {q.values.startNumerator = ran(1, q.values.denominator);}var unitsMode = o('unitsMode').value;q.values.unit = unitsMode === 1 ? '' : unitsMode === 2 ? '£' : unitsMode === 3 ? ['m', 'g'].ran() : ['', '£', 'm', 'g'].ran();if (q.values.unit === '£') {var basePV = ran(-2, 2);var baseValue = ran(1, 9) * Math.pow(10, basePV);if (basePV > -2 && ran(0, 2) === 0) baseValue += 5 * Math.pow(10, basePV - 1);} else if (q.values.unit === 'm') {var basePV = ran(-3, 2);var baseValue = ran(1, 9) * Math.pow(10, basePV);if (basePV > -3 && ran(0, 2) === 0) baseValue += 5 * Math.pow(10, basePV - 1);} else if (q.values.unit === 'g') {var basePV = ran(0, 2);var baseValue = ran(1, 9) * Math.pow(10, basePV);if (basePV > 0 && ran(0, 2) === 0) baseValue += 5 * Math.pow(10, basePV - 1);} else {var basePV = ran(-1, 2);var baseValue = ran(1, 9) * Math.pow(10, basePV);if (basePV > -1 && ran(0, 2) === 0) baseValue += 5 * Math.pow(10, basePV - 1);}q.values.wholeValue = roundToNearest(baseValue * q.values.denominator, 0.001);q.values.startValueText = q.fractionToDecimalText([q.values.startNumerator * q.values.wholeValue, q.values.denominator]);if (q.values.startNumerator === q.values.denominator) {q.text = [\"If <<color:#00F>><<bold:true>>1 whole<<color:#000>><<bold:false>> is <<color:#F00>><<bold:true>>\"].concat(q.values.startValueText).concat([\"<<color:#000>><<bold:false>>,\"]);} else {q.text = [\"If <<color:#00F>><<bold:true>>\", [\"frac\", [String(q.values.startNumerator)],[String(q.values.denominator)]], \"<<color:#000>><<bold:false>> is <<color:#F00>><<bold:true>>\"].concat(q.values.startValueText).concat([\"<<color:#000>><<bold:false>>,\"]);}q.values.startFraction = [q.values.startNumerator, q.values.denominator];q.reset();}","isFractionKnown":"function(fraction) {var knownFractions = draw.ids.obj.question.values.knownFractions;for (var k = 0; k < knownFractions.length; k++) {var knownFraction = knownFractions[k];if (knownFraction[0] === fraction[0] && knownFraction[1] === fraction[1]) return true;}return false;}","fractionToDecimalText":"function(fraction) {var num = roundToNearest(fraction[0], 0.001);var den = roundToNearest(fraction[1], 0.001);var unit = o('question').values.unit;if (unit === 'g') {if (num / den >= 1000) {num /= 1000;unit = 'k' + unit;}} else if (unit === 'm') {if (num / den >= 1000) {num /= 1000;unit = 'k' + unit;} else if (num / den < 1 && num / den >= 0.01) {num *= 100;unit = 'c' + unit;} else if (num / den < 0.01) {num *= 1000;unit = 'm' + unit;}} else if (unit === '£') {if (num / den < 1) {return [String(Math.round(100 * num / den)) + 'p'];} else {var value = String(Math.round(100 * num / den) / 100);var dp = value.indexOf('.');while (dp > -1 && dp > value.length - 3) {value += '0';dp = value.indexOf('.');}value = value.slice(0, dp + 3);return ['£' + String(value)];}}var textArray = [String(Math.floor(num / den))];var map = {};var nonRecurringString = '';var recurringString = '';num %= den;num = roundToNearest(num, Math.pow(10, -8));while (num > 0) {num *= 10;if (!un(map[num])) {recurringString = nonRecurringString.substr(map[num]);nonRecurringString = nonRecurringString.substr(0, map[num]);break;} else {map[num] = nonRecurringString.length;}var digit = Math.floor(num / den);nonRecurringString += String(digit);num %= den;num = roundToNearest(num, Math.pow(10, -8));}if (nonRecurringString !== '' || recurringString !== '') {textArray[0] = textArray[0] + '.';}textArray[0] = textArray[0] += nonRecurringString;if (recurringString !== '') {textArray.push(['recurring', [recurringString]], '');}if (typeof unit === 'string' && unit.length > 0) {textArray.push(unit);}return textArray;}","fracScale":1}],"selected":false},{"obj":[{"type":"text2","rect":[760.5406666666667,19.425,118.682,60],"text":["Reset"],"align":[0,0],"box":{"type":"loose","borderColor":"#000","borderWidth":3,"radius":10,"color":"#CFC"},"interact":{"click":"function(obj) {o('question').reset();}"},"fontSize":32,"id":"reset"}],"selected":false},{"obj":[{"type":"text2","rect":[652.226,19.425000000000008,89.681,60],"text":["New"],"align":[0,0],"box":{"type":"loose","borderColor":"#000","borderWidth":3,"radius":10,"color":"#CFC"},"interact":{"click":"function(obj) {o('question').newQuestion();}"},"fontSize":32,"id":"new"}],"selected":false},{"obj":[{"type":"dropMenu","text":["Quarters"],"align":[-1,0],"rect":[897.8563333333333,19.425000000000004,200,60],"fontSize":32,"box":{"type":"loose","color":"#3FF","borderColor":"#000","borderWidth":3},"optionBox":{"color":"#CFF","lineWidth":2,"align":[0,0]},"showDownArrow":true,"downArrowSize":12,"options":[{"text":["Halves"],"value":2},{"text":["Thirds"],"value":3},{"text":["Quarters"],"value":4},{"text":["Fifths"],"value":5},{"text":["Sixths"],"value":6},{"text":["Sevenths"],"value":7},{"text":["Eighths"],"value":8},{"text":["Ninths"],"value":9},{"text":["Tenths"],"value":10},{"text":["Elevenths"],"value":11},{"text":["Twelfths"],"value":12}],"value":4,"onchange":"function(obj) {var values = draw.ids.obj.question.values;values.denominator = obj.value;values.maxNumerator = obj.value * values.scaleMax;values.startFraction = [obj.value, obj.value];if (draw.ids.obj.question.isFractionKnown([values.denominator, values.denominator]) === false) {values.knownFractions.push([values.denominator, values.denominator]);}draw.ids.obj.question.reset(false);draw.ids.obj.question.updateScale();draw.ids.obj.question.draw();}"}],"selected":false},{"obj":[{"type":"text2","rect":[45,390,50,100],"fontSize":36,"text":["0"],"align":[0,1],"fracScale":1},{"type":"text2","rect":[1105,390,50,100],"fontSize":36,"text":["1"],"align":[0,1],"fracScale":1}],"id":"fractionScale","selected":false},{"obj":[{"type":"polygon","polygonType":"rect","color":"none","thickness":1,"fillColor":"#09F","points":[[70,500],[1130,500],[1130,570],[70,570]],"closed":true,"lineDecoration":[],"angles":[],"clockwise":false,"id":"colorBar1"}],"id":"colorBar1","vis":true,"selected":false},{"obj":[{"type":"polygon","polygonType":"rect","color":"#FCC","thickness":1,"fillColor":"#F96","points":[[600,500],[997.5,500],[997.5,570],[600,570]],"closed":true,"lineDecoration":[],"angles":[],"clockwise":false,"id":"colorBar2"}],"id":"colorBar2","vis":false,"selected":false},{"obj":[{"type":"polygon","polygonType":"rect","color":"#999","thickness":5,"fillColor":"none","points":[[600,500],[1130,500],[1130,570],[600,570]],"closed":true,"lineDecoration":[],"angles":[],"clockwise":false,"id":"bar2"}],"id":"bar2","vis":false,"selected":false},{"obj":[{"type":"polygon","polygonType":"rect","color":"#000","thickness":5,"fillColor":"none","points":[[70,500],[1130,500],[1130,570],[70,570]],"closed":true,"lineDecoration":[],"angles":[],"clockwise":false,"id":"bar1"}],"id":"bar1","vis":true,"selected":false},{"obj":[{"type":"line","color":"#000","thickness":5,"startPos":[70,500],"finPos":[70,570]},{"type":"line","color":"#000","thickness":5,"startPos":[335,500],"finPos":[335,570]},{"type":"line","color":"#000","thickness":5,"startPos":[600,500],"finPos":[600,570]},{"type":"line","color":"#000","thickness":5,"startPos":[865,500],"finPos":[865,570]},{"type":"line","color":"#000","thickness":5,"startPos":[1130,500],"finPos":[1130,570]}],"id":"verticalBars","selected":false},{"obj":[{"type":"text2","rect":[1083.179,320.574,93.642,169.736],"text":[""],"align":[-1,-1],"box":{"type":"loose","borderColor":"#FFF","borderWidth":3,"radius":0,"color":"#FFF"},"trigger":[]},{"type":"text2","rect":[1090,369.902,80,100],"text":["1"],"align":[0,0],"box":{"type":"loose","borderColor":"#666","borderWidth":3,"radius":10,"color":"#FFF"},"color":"#666","bold":true,"fontSize":36,"fracScale":1,"trigger":[],"id":"startValueFraction"},{"type":"text2","rect":[1063.962890625,599.781,132.07421875,70],"text":["12cm"],"align":[0,0],"box":{"type":"loose","borderColor":"#666","borderWidth":3,"radius":10,"color":"#FFF"},"color":"#666","bold":true,"fontSize":36,"perc":100,"value":180,"id":"startValue"},{"type":"polygon","polygonType":"equi","color":"#666","thickness":0.96,"fillColor":"#666","points":[[1129.999,493.014],[1121.039,477.492],[1138.962,477.492]],"closed":true,"angles":[{"show":false},{"show":false},{"show":false}],"clockwise":false,"trigger":[]},{"type":"polygon","polygonType":"equi","color":"#666","thickness":0.96,"fillColor":"#666","points":[[1138.96,595.522],[1121.04,595.522],[1130,580]],"closed":true,"angles":[{"show":false},{"show":false},{"show":false}],"clockwise":false,"fontSize":36,"id":"startValueMarker"}],"fraction":[4,4],"id":"startValue","selected":false},{"obj":[{"type":"settingsButton","left":1116.49,"top":19.425000000000004,"size":60,"fillColor":"#FCF","interact":{"click":"function(obj) {var settingsButton = o('settingsButton');settingsButton.value = !settingsButton.value;settingsButton.fillColor = settingsButton.value === true ? '#FFF' : '#FCF';o('settingsBox')._path.vis = settingsButton.value;o('settings1')._path.vis = settingsButton.value;o('settings2')._path.vis = settingsButton.value;o('settings3')._path.vis = settingsButton.value;o('startFractionMode')._path.vis = settingsButton.value;o('unitsMode')._path.vis = settingsButton.value;o('improperMode')._path.vis = settingsButton.value;o('extendPlus')._path.vis = settingsButton.value;o('extendMinus')._path.vis = settingsButton.value;}"},"id":"settingsButton","value":false}],"selected":false,"isInput":{},"interact":{}},{"obj":[{"type":"text2","rect":[20,125.33543511629091,776.501086714825,54],"fontSize":42,"text":["what other fractions can you work out?"],"align":[-1,-1]}],"selected":false},{"obj":[{"type":"text2","rect":[20,124.65703194500031,1165.7090082761586,139.9355133127249],"fontSize":32,"text":[""],"align":[-1,-1],"box":{"type":"loose","borderColor":"#000","borderWidth":3,"radius":15,"color":"#FCF"},"bold":false,"id":"settingsBox"}],"selected":false,"vis":false},{"obj":[{"type":"dropMenu","text":["1 whole"],"align":[-1,0],"rect":[334.8129341319984,183.961,240,60],"fontSize":32,"box":{"type":"loose","color":"#3FF","borderColor":"#000","borderWidth":3},"optionBox":{"color":"#CFF","lineWidth":2,"align":[0,0]},"showDownArrow":true,"downArrowSize":12,"options":[{"text":["1 whole"],"value":1},{"text":["Unit fraction"],"value":2},{"text":["Any fraction"],"value":3}],"value":1,"onchange":"function(obj) {console.log(obj.value);}","id":"startFractionMode"}],"selected":false,"vis":false},{"obj":[{"type":"dropMenu","text":["Mixed"],"align":[-1,0],"rect":[53.637999999999984,183.961,240,60],"fontSize":32,"box":{"type":"loose","color":"#3FF","borderColor":"#000","borderWidth":3},"optionBox":{"color":"#CFF","lineWidth":2,"align":[0,0]},"showDownArrow":true,"downArrowSize":12,"options":[{"text":["No units"],"value":1},{"text":["Money"],"value":2},{"text":["Metric units"],"value":3},{"text":["Mixed"],"value":4}],"value":4,"onchange":"function(obj) {}","id":"unitsMode"}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[111.12833064279715,129.6570319450003,125.01933871440565,54],"fontSize":32,"text":["Units"],"align":[0,0],"id":"settings1","bold":false}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[326.6810658680017,129.65703194500043,256.2637365279935,54],"fontSize":32,"text":["Starting fraction"],"align":[0,0],"id":"settings2","bold":false}],"selected":false,"vis":false},{"obj":[{"type":"dropMenu","text":["Mixed numbers"],"align":[-1,0],"rect":[630.9073989581323,182.4515493501181,320,60],"fontSize":32,"box":{"type":"loose","color":"#3FF","borderColor":"#000","borderWidth":3},"optionBox":{"color":"#CFF","lineWidth":2,"align":[0,0]},"showDownArrow":true,"downArrowSize":12,"options":[{"text":["Improper fractions"],"value":1},{"text":["Mixed numbers"],"value":2}],"value":2,"onchange":"function(obj) {o('question').draw();}","id":"improperMode"}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[621.2902325346681,129.6570319450005,339.23433284692817,54],"fontSize":32,"text":["Fractions > 1:"],"align":[0,0],"id":"settings3","bold":false}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[1010.5754236921784,169.62478860136275,50,50],"fontSize":45,"text":["-"],"align":[0,0],"box":{"type":"loose","borderColor":"#000","borderWidth":4,"radius":25},"interact":{"click":"function(obj2) {var values = draw.ids.obj.question.values;if (values.scaleMax === 1) return;values.scaleMax--;values.maxNumerator = values.denominator * values.scaleMax;if (values.position[0] > values.maxNumerator) values.position[0] = values.maxNumerator;draw.ids.obj.question.updateScale();draw.ids.obj.question.draw();}"},"id":"extendMinus"}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[1077.7604236921786,169.62478860136275,50,50],"fontSize":45,"text":["+"],"align":[0,0],"box":{"type":"loose","borderColor":"#000","borderWidth":4,"radius":25},"interact":{"click":"function(obj2) {var values = draw.ids.obj.question.values;if (values.scaleMax === 3) return;values.scaleMax++;values.maxNumerator = values.denominator * values.scaleMax;draw.ids.obj.question.updateScale();draw.ids.obj.question.draw();}"},"id":"extendPlus"}],"selected":false,"vis":false},{"obj":[{"type":"text2","rect":[1083.179,320.5739999999992,93.642,169.736],"text":[""],"align":[-1,-1],"box":{"type":"loose","borderColor":"#FFF","borderWidth":3,"radius":0,"color":"#FFF"},"id":"mask","trigger":[]},{"type":"text2","rect":[1090.0000000000005,369.9019999999989,80,100],"text":["1"],"align":[0,0],"box":{"type":"loose","borderColor":"#00F","borderWidth":3,"radius":10,"color":"#FFF"},"id":"frac","color":"#00F","bold":true,"fontSize":36,"fracScale":1,"trigger":[]},{"type":"polygon","polygonType":"equi","color":"#00F","thickness":0.96,"fillColor":"#00F","points":[[1129.9990000000016,493.0139999999992],[1121.0390000000007,477.49199999999934],[1138.9620000000023,477.49199999999934]],"closed":true,"angles":[{"show":false},{"show":false},{"show":false}],"clockwise":false,"id":"tri1","trigger":[]},{"type":"circle","color":"#00F","thickness":3,"fillColor":"#CCF","center":[1130.0000000000018,318.839],"radius":28.839,"showCenter":false,"trigger":[]},{"type":"polygon","polygonType":"arrow2","color":"#000","thickness":1.443,"fillColor":"#FFC","points":[[1107.4719999999998,318.839],[1118.7360000000008,304.7589999999983],[1118.7360000000008,310.3909999999983],[1141.2640000000015,310.3909999999983],[1141.2640000000015,304.7589999999983],[1152.528000000002,318.839],[1141.2640000000015,332.91899999999885],[1141.2640000000015,327.286999999999],[1118.7360000000008,327.286999999999],[1118.7360000000008,332.91899999999885]],"closed":true,"angles":[{"show":false},{"show":false},{"show":false},{"show":false},{"show":false},{"show":false},{"show":false},{"show":false},{"show":false},{"show":false}],"clockwise":false,"trigger":[]}],"interact":{"draggable":true,"onDragMove":"function(path) {var objs = draw.ids.obj;var paths = draw.ids.path;var values = objs.question.values;var left = values.barMargin;var width = 1200 - 2 * values.barMargin;var dragger = draw.ids.path.dragger;var num = roundToNearest((dragger._center[0] - left) * values.maxNumerator / width, 1);num = Math.max(0, Math.min(num, values.maxNumerator));values.position = [num, values.denominator];draw.ids.obj.question.draw();}","dragDrawMode":"drawCanvasPaths"},"id":"dragger","selected":false},{"obj":[{"type":"text2","rect":[1063.962890625,599.781,132.07421875,70],"text":["12cm"],"align":[0,0],"box":{"type":"loose","borderColor":"#F00","borderWidth":3,"radius":10,"color":"#FFF"},"color":"#F00","bold":true,"fontSize":36,"id":"value","interact":{"click":"function(obj) {if (obj.text[0] == '?') {var q = draw.ids.obj.question;q.values.knownFractions.push(clone(q.values.position));var objs = [clone(o('mask')), clone(o('frac')), clone(o('value')), clone(o('tri1')), clone(o('tri2'))];for (o2 = 0; o2 < objs.length; o2++) delete objs[o2].id;objs[1].color = '#666';objs[1].box.borderColor = '#666';delete objs[2].interact;objs[2].text = clone(q.values.valueText);objs[2].ctx = draw.hiddenCanvas.ctx;objs[2].measureOnly = true;var textMeasure = text(objs[2]).tightRect;delete objs[2].ctx;delete objs[2].measureOnly;if (textMeasure[2] + 20 > objs[2].rect[2]) {var dw = textMeasure[2] + 20 - objs[2].rect[2];objs[2].rect[2] = textMeasure[2] + 20;objs[2].rect[0] -= dw / 2;}objs[2].color = '#666';objs[2].box.borderColor = '#666';objs[3].color = '#666';objs[3].fillColor = '#666';objs[4].color = '#666';objs[4].fillColor = '#666';draw.path.push({obj: objs,temp: true,fraction: clone(q.values.position)});var dragger = draw.getPathById('dragger');draw.path.splice(draw.path.indexOf(dragger), 1);var marker = draw.getPathById('marker');draw.path.splice(draw.path.indexOf(marker), 1);draw.path.push(dragger, marker);q.draw();}}"},"perc":100,"value":180},{"type":"polygon","polygonType":"equi","color":"#F00","thickness":0.96,"fillColor":"#F00","points":[[1138.9599999999991,595.522],[1121.039999999999,595.522],[1129.999999999999,580]],"closed":true,"angles":[{"show":false},{"show":false},{"show":false}],"clockwise":false,"id":"tri2","fontSize":36}],"id":"marker","selected":false}],"margins":[20,20]}]}]}